<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Daily Routine Planner</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00e5a8">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    :root{--bg1:#2c5364;--bg2:#0f2027;--card:rgba(255,255,255,.22);--text:#ffffff;--accent:#00e5a8;--success:#22c55e;--muted:#94a3b8}
    body{font-family:'Inter',system-ui,sans-serif;background:radial-gradient(circle at top,var(--bg1),var(--bg2) 70%);color:var(--text);min-height:100vh;transition:.3s}
    body.light{--bg1:#f1f5f9;--bg2:#e2e8f0;--card:#ffffff;--text:#0f172a;--muted:#475569}
    header{text-align:center;padding:2rem 1rem 1.2rem}
    header h1{font-family:'Poppins';font-size:2.3rem;font-weight:700}
    header p{opacity:.8;margin-top:.4rem}
    .top-bar{display:flex;justify-content:center;gap:.8rem;margin-top:1rem;flex-wrap:wrap}
    .pill{padding:.45rem 1rem;border-radius:999px;font-weight:600;font-size:.9rem}
    .streak{background:linear-gradient(135deg,#ff9f1c,#ffd166);color:#0f2027}
    .badge{background:linear-gradient(135deg,#22c55e,#86efac);color:#022c22;display:none}
    .progress-wrap{width:260px;background:rgba(255,255,255,.25);border-radius:999px;overflow:hidden;height:12px}
    .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,#00e5a8,#6ee7b7);transition:width .4s}
    .controls{display:flex;gap:1rem;justify-content:center;margin-top:.6rem;font-size:.9rem}
    .toggle{cursor:pointer;opacity:.85}
    .days{display:flex;flex-wrap:wrap;justify-content:center;gap:.6rem;padding:1.2rem}
    .day-btn{padding:.6rem 1.1rem;border-radius:999px;border:none;background:rgba(255,255,255,.18);color:var(--text);cursor:pointer;font-weight:500}
    .day-btn.active,.day-btn:hover{background:var(--accent);color:#0f2027}
    .container{max-width:1200px;margin:auto;padding:1rem}
    .sections{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.4rem}
    .card{background:var(--card);border-radius:22px;padding:1.4rem;box-shadow:0 10px 25px rgba(0,0,0,.12)}
    .card h3{margin-bottom:.9rem;font-size:1.25rem;color:var(--accent);display:flex;justify-content:space-between}
    .ring{font-size:.8rem;color:var(--muted)}
    .task{padding:.55rem .7rem;border-radius:12px;cursor:pointer;margin-bottom:.4rem;transition:.2s}
    .task:hover{background:rgba(255,255,255,.15)}
    .task.done{background:rgba(34,197,94,.25);border:2px solid var(--success);color:#dcfce7;animation:pop .25s}
    @keyframes pop{from{transform:scale(.9)}to{transform:scale(1)}}
    footer{text-align:center;padding:1.4rem;font-size:.85rem;color:var(--muted)}
    .summary{margin-top:1.2rem;text-align:center;display:none}
    .summary-card{background:var(--card);padding:1rem 1.4rem;border-radius:18px;display:inline-block;font-weight:600}
    #confirmModal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:.3s}
    #confirmModal.show{opacity:1;pointer-events:auto}
    .modal{background:var(--bg2);padding:1.6rem 2rem;border-radius:18px;max-width:300px;text-align:center}
    .modal button{margin:.6rem;border:none;border-radius:999px;padding:.45rem 1.3rem;cursor:pointer;font-weight:600}
    .yes{background:#22c55e;color:#022c22}
    .no{background:#ef4444;color:#fff}
    .heatmap,.monthmap{display:grid;gap:4px;justify-content:center;margin-top:1rem}
    .heatmap{grid-template-columns:repeat(7,14px)}
    .monthmap{grid-template-columns:repeat(10,14px)}
    .heat{width:14px;height:14px;border-radius:3px;background:#334155}
    .heat.done{background:#22c55e}
    canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:999;display:none}
    .achievement{position:fixed;bottom:-200px;left:50%;transform:translateX(-50%);background:var(--card);padding:1.2rem 1.6rem;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.25);text-align:center;transition:.6s;z-index:1000}
    .achievement.show{bottom:40px}
    .ach-icon{font-size:2.2rem;margin-bottom:.4rem}
  </style>
</head>
<body>

<canvas id="confetti"></canvas>

<header>
  <h1>My Healthy Daily Routine</h1>
  <p>Turn daily habits into a game üéÆ</p>
  <div class="top-bar">
    <div class="pill streak">üî• Streak: <span id="streakCount">0</span></div>
    <div class="pill badge" id="badgeBox">üèÜ Perfect Day</div>
    <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
  </div>
  <div class="controls">
    <span class="toggle" onclick="toggleTheme()">üåì Theme</span>
    <span class="toggle" onclick="toggleSound()">üîä Sound</span>
  </div>
</header>

<div class="days" id="dayButtons"></div>

<div class="container">
  <div class="sections" id="routine"></div>
  <div class="summary" id="summaryBox"><div class="summary-card" id="summaryText"></div></div>
  <div class="heatmap" id="heatmap"></div>
  <div class="monthmap" id="monthmap"></div>
</div>

<footer>Offline-ready ‚Ä¢ Data stored only on your device</footer>
<div id="achievementCard" class="achievement"></div>

<div id="confirmModal">
  <div class="modal">
    <h3>Task completed?</h3>
    <p>Did you finish this task?</p>
    <button class="yes" onclick="confirmYes()">Yes</button>
    <button class="no" onclick="confirmNo()">No</button>
  </div>
</div>

<script>
/******** DATA ********/
const baseMorning=["üíß Drink water","ü•£ Soaked: pachai payir + vendhayam + almonds (üü¢ drink soaking water)","üå∞ Soaked: peanuts + pumpkin seeds (üî¥ do NOT drink soaking water)","üçØ Dates (5) + Cashew (4) + Walnuts (4)","üö∂‚Äç‚ôÇÔ∏è 30 min walk","üçΩÔ∏è Breakfast","üß¥ Moisturizer ‚Üí ‚òÄÔ∏è Sunscreen","ü•õ Milk (1 glass)"];
const baseAfternoon=["üçõ Lunch (normal PG food)"];
const baseEvening=["üçå Banana √ó2","üçà Amla √ó1","ü•õ Milk (1 glass)"];
const baseNight=["üçΩÔ∏è Dinner","üßº Facewash","üß¥ Toner ‚Üí Moisturizer","üíÜ Dry scalp massage","üßò Meditation (10 mins)","üò¥ Sleep before 11:30 PM"];
const days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];

let currentTask=null,currentDayKey=null,soundOn=true;

function renderDayButtons(){const w=document.getElementById('dayButtons');days.forEach(d=>{const b=document.createElement('button');b.className='day-btn';b.innerText=d;b.onclick=()=>showDay(d,b);w.appendChild(b)})}

function renderTasks(list){return list.map((t,i)=>{const id=`${currentDayKey}-${i}`;const done=localStorage.getItem(id)==='1';return `<div class='task ${done?'done':''}' data-id='${id}' onclick='completeTask(this)'>${t}</div>`}).join('')}

function showDay(day,btn){document.querySelectorAll('.day-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');currentDayKey=`${day}-${new Date().toISOString().slice(0,10)}`;let m=[...baseMorning],a=[...baseAfternoon],n=[...baseNight];if(day==='Thursday'||day==='Sunday')a=["üçó Chicken biriyani (afternoon)"];if(day==='Wednesday'||day==='Friday'||day==='Saturday')n.splice(3,0,"üõ¢Ô∏è Coconut oil scalp massage","üçä Eat orange");if(day==='Thursday'||day==='Saturday'||day==='Sunday')m.splice(1,0,"üöø Hair wash / shampoo (after oil night)");document.getElementById('routine').innerHTML=`<div class='card'><h3>üåÖ Morning <span class='ring' id='rm'></span></h3>${renderTasks(m)}</div><div class='card'><h3>‚òÄÔ∏è Afternoon <span class='ring' id='ra'></span></h3>${renderTasks(a)}</div><div class='card'><h3>üåá Evening <span class='ring' id='re'></span></h3>${renderTasks(baseEvening)}</div><div class='card'><h3>üåô Night <span class='ring' id='rn'></span></h3>${renderTasks(n)}</div>`;updateProgress();updateRings();renderHeatmap();renderMonthmap();updateSummary()}

function completeTask(el){if(el.classList.contains('done'))return;currentTask=el;document.getElementById('confirmModal').classList.add('show')}
function confirmYes(){currentTask.classList.add('done');localStorage.setItem(currentTask.dataset.id,'1');closeModal();updateProgress();updateRings();updateSummary()}
function confirmNo(){closeModal()}
function closeModal(){document.getElementById('confirmModal').classList.remove('show')}

function updateProgress(){
  const t=document.querySelectorAll('.task').length||1;
  const d=document.querySelectorAll('.task.done').length;
  const p=Math.round(d/t*100);
  document.getElementById('progressBar').style.width=p+'%';
  if(p===100){
    awardBadge();
    updateStreak();
    triggerConfetti();
    saveHeatmap();
    renderHeatmap();
    renderMonthmap();
  }
}

function updateRings(){['m','a','e','n'].forEach((k,i)=>{const card=document.querySelectorAll('.card')[i];if(!card)return;const total=card.querySelectorAll('.task').length;const done=card.querySelectorAll('.task.done').length;document.getElementById('r'+k).innerText=Math.round(done/total*100)+'%'})}

function updateSummary(){const hour=new Date().getHours();const box=document.getElementById('summaryBox');if(hour<18){box.style.display='none';return;}const t=document.querySelectorAll('.task').length||1;const d=document.querySelectorAll('.task.done').length;box.style.display='block';document.getElementById('summaryText').innerText=`You completed ${Math.round(d/t*100)}% today üéØ`}

function updateStreak(){const today=new Date().toISOString().slice(0,10);const last=localStorage.getItem('lastDone');let s=parseInt(localStorage.getItem('streak')||'0');if(last!==today){const y=new Date();y.setDate(y.getDate()-1);if(last===y.toISOString().slice(0,10))s++;else s=1;localStorage.setItem('streak',s);localStorage.setItem('lastDone',today)}document.getElementById('streakCount').innerText=s;showAchievementCard(s)}

function showAchievementCard(streak){let tier=null;if(streak===7)tier={icon:'ü•â',title:'Bronze Discipline',text:'7 days of consistency!'};if(streak===30)tier={icon:'ü•à',title:'Silver Discipline',text:'30 days of discipline!'};if(streak===90)tier={icon:'ü•á',title:'Gold Discipline',text:'90 days of mastery!'};if(!tier)return;const card=document.getElementById('achievementCard');card.innerHTML=`<div class='ach-icon'>${tier.icon}</div><h3>${tier.title}</h3><p>${tier.text}</p>`;card.classList.add('show');setTimeout(()=>card.classList.remove('show'),4000)}

function awardBadge(){document.getElementById('badgeBox').style.display='inline-block'}
function dateKey(d){const y=d.getFullYear();const m=String(d.getMonth()+1).padStart(2,'0');const da=String(d.getDate()).padStart(2,'0');return `${y}-${m}-${da}`}

function saveHeatmap(){const key=dateKey(new Date());localStorage.setItem('heat-'+key,'1')}

function renderHeatmap(){const h=document.getElementById('heatmap');h.innerHTML='';for(let i=6;i>=0;i--){const d=new Date();d.setDate(d.getDate()-i);const key=dateKey(d);const div=document.createElement('div');div.className='heat'+(localStorage.getItem('heat-'+key)?' done':'');h.appendChild(div)}}

function renderMonthmap(){const m=document.getElementById('monthmap');m.innerHTML='';const now=new Date();const year=now.getFullYear();const month=now.getMonth();const daysInMonth=new Date(year,month+1,0).getDate();for(let day=1;day<=daysInMonth;day++){const d=new Date(year,month,day);const key=dateKey(d);const div=document.createElement('div');div.className='heat'+(localStorage.getItem('heat-'+key)?' done':'');m.appendChild(div)}}

function triggerConfetti(){const c=document.getElementById('confetti');const x=c.getContext('2d');c.width=innerWidth;c.height=innerHeight;c.style.display='block';const p=[...Array(140)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*5+2,d:Math.random()*3+2}));let f=0;function animate(){x.clearRect(0,0,c.width,c.height);p.forEach(o=>{x.beginPath();x.arc(o.x,o.y,o.r,0,Math.PI*2);x.fillStyle=`hsl(${Math.random()*360},100%,60%)`;x.fill();o.y+=o.d});if(f++<60) requestAnimationFrame(animate)}animate();setTimeout(()=>{x.clearRect(0,0,c.width,c.height);c.style.display='none'},4000)}

function toggleTheme(){document.body.classList.toggle('light')}
function toggleSound(){soundOn=!soundOn}

renderDayButtons();
const today=days[new Date().getDay()];
const btn=[...document.querySelectorAll('.day-btn')].find(b=>b.innerText===today);
showDay(today,btn);

if('serviceWorker' in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('sw.js')})}
</script>
</body>
</html>